---
- hosts: central
  remote_user: root
  roles:
    - rabbitmq-server
    - central-app
    - nagios
  tasks:
  - name: Central OS - RabbitMQ enable
    service:
      name: rabbitmq-server
      state: started
      enabled: yes
  - name: Central Nagios - RabbitMQ monitoring script
    copy:
      src: /etc/ansible/apps/nagios/rabbit.sh
      dest: /usr/lib64/nagios/rabbit.sh
      mode: 0755
  - name: Central Nagios - sudoers setup
    copy:
      src: /etc/ansible/apps/nagios/nagios
      dest: /etc/sudoers.d/nagios
  - name: Central Ganglia - gmetad enable
    service:
      name: gmetad
      state: started
      enabled: yes
  - name: Central Ganglia - gmond enable
    service:
      name: gmond
      state: started
      enabled: yes
  - name: Central Ganglia - httpd enable
    service:
      name: httpd
      state: started
      enabled: yes

- hosts: workers
  remote_user: root
  roles:
    - worker-app
    - ganglia-worker
...
